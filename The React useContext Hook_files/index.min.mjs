!function(){"use strict";const t={activeClass:"TK-Nav-Overlay--Active"};class e{constructor(e,s){this.options=Object.assign({},t,s),this.element=e,this.activeClass=this.options.activeClass,this.hidden=!0}show(){this.hidden&&this.element&&(this.element.classList.add(this.activeClass),this.hidden=!1)}hide(){!this.hidden&&this.element&&(this.element.classList.remove(this.activeClass),this.hidden=!0)}addEventListener(t,e,s=!1){this.element&&this.element.addEventListener(t,e,s)}}const s="transition"in document.documentElement.style,n=t=>"function"==typeof t,i={hover:!1,click:!1,activeClass:"TK-Dropdown--Active",beforeOpenHook:()=>{},beforeCloseHook:()=>{}};class o{constructor(t,e){t&&(this.element=t,this.options=Object.assign({},i,e),this.closed=!0,this.running=!1,this.parent=this.options.parent||t.parentElement,this.button=this.options.button||this.parent.firstElementChild,this.beforeOpenHook=this.options.beforeOpenHook,this.beforeCloseHook=this.options.beforeCloseHook,this.init())}run(){if(!s)return;const{transition:t}=window.getComputedStyle(this.element,null);if("none"===t.split(" ")[0])return void(this.running=!1);this.running=!0;const e=()=>{this.running=!1,this.element.removeEventListener("transitionend",e,!1)};this.element.addEventListener("transitionend",e,!1)}open(){this.closed&&(n(this.beforeOpenHook)&&this.beforeOpenHook(),this.run(),this.element.classList.add(this.options.activeClass),this.closed=!1,document.addEventListener("keydown",this.bind("closeOnEscape"),!1))}close(){this.closed||(n(this.beforeCloseHook)&&this.beforeCloseHook(),this.run(),this.element.classList.remove(this.options.activeClass),this.closed=!0,document.removeEventListener("keydown",this.bind("closeOnEscape"),!1))}closeOnEscape(t){27===t.keyCode&&this.close()}toggle(){window.requestAnimationFrame((()=>{this.closed?this.open():this.close()}))}contains(t){return this.element.contains(t)}associate(t){let e=this.contains(t);return t===this.button&&(e=!0),e}bind(t){const e=`${t}_`;return n(this[e])||(this[e]=this[t].bind(this)),this[e]}on(t){"tk-click"===t&&this.button.addEventListener("click",this.bind("toggle"),!1),"tk-hover"===t&&this.options.hover&&(this.button.addEventListener("focus",this.bind("open"),!1),this.parent.addEventListener("mouseenter",this.bind("open"),!1),this.parent.addEventListener("mouseleave",this.bind("close"),!1)),"tk-before-open-hook"===t&&(this.beforeOpenHook=this.options.beforeOpenHook),"tk-before-close-hook"===t&&(this.beforeCloseHook=this.options.beforeCloseHook)}off(t){"tk-click"===t&&this.button.removeEventListener("click",this.bind("toggle"),!1),"tk-hover"===t&&this.options.hover&&(this.button.removeEventListener("focus",this.bind("open"),!1),this.parent.removeEventListener("mouseenter",this.bind("open"),!1),this.parent.removeEventListener("mouseleave",this.bind("close"),!1)),"tk-before-open-hook"===t&&(this.beforeOpenHook=null),"tk-before-close-hook"===t&&(this.beforeCloseHook=null)}deface(){if(!this.options.hover)return;const t=t=>t.preventDefault(),e=()=>{this.on("tk-click"),this.button.removeEventListener("click",t,!1)},s=()=>{this.off("tk-click"),this.button.addEventListener("click",t,!1)};this.button.addEventListener("mouseenter",(()=>{this.running&&s(),requestAnimationFrame((()=>{s(),e()}))}),!1)}init(){this.options.click&&this.on("tk-click"),this.options.hover&&(this.on("tk-hover"),this.deface())}}class r{constructor(t,e){Array.isArray(t)&&(this.dropdowns=t.map((t=>t instanceof o?t:new o(t,e))))}close(){this.dropdowns.forEach((t=>{t.close()}))}contains(t){let e=!1;return this.dropdowns.forEach((s=>{s.contains(t)&&(e=!0)})),e}associate(t){let e=!1;return this.dropdowns.forEach((s=>{s.associate(t)&&(e=!0)})),e}on(t){this.dropdowns.forEach((e=>{e.on(t)}))}off(t){this.dropdowns.forEach((e=>{e.off(t)}))}}function a(t=[]){return Promise.allSettled?Promise.allSettled(t):Promise.all(t).catch((()=>Promise.resolve()))}const c=!!window.fetch,h=!!window.Promise,l={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"};class u{constructor(t=u.getHostname(),e=l){this.defaults=Object.assign({},e),this.url=u.getApiUrl(t),this.hostname=t,this.isStore=t.includes("store.progress.com"),this.online=navigator.onLine,this.available=!!(this.url&&this.online&&h&&c),this.rejection=new Error("Not allowed domain || offline || no browser support")}static json(t){if(t.ok)return t.json();throw new Error(t.statusText)}static getHostname(){return window.location.hostname.toLowerCase()}static getApiUrl(t=u.getHostname()){let e="";if(["www.telerik.com","docs.telerik.com","demos.telerik.com"].includes(t))e="https://www.telerik.com/account/api";else if(["www.progress.com","store.progress.com"].includes(t))e="https://store.progress.com/api";else{const s=t.split("."),n=s[0],i=s[1],o=s[2],r=n.length,a=n.startsWith("www")&&r>=3&&r<=6&&"telerik"===i&&"com"===o,c=n.startsWith("www")&&r>=3&&r<=6&&"progress"===i&&"com"===o,h=n.startsWith("store",3)&&8===r&&"progress"===i&&"com"===o;if(a&&(e=`https://${n}.telerik.com/account/api`),c){e=`https://${t.substring(3,6)}store.progress.com/api`}if(h){e=`https://${t.substring(0,3)}store.progress.com/api`}}return e}initAsync(){return this.available?this.getEnvironment().then((t=>{const e=window.location.href,s=encodeURIComponent(encodeURIComponent(e));return this.env=t,this.env.signoutUrl=`${t.telerikWebsiteUrl}${t.signoutBaseUrl}${s}`,t})):Promise.reject(this.rejection)}getEnvironment(){if(!this.available)return Promise.reject(this.rejection);const t=this.isStore?`${this.url}/v1/environments/current`:`${this.url}/v2/environments/current`;return fetch(t,this.defaults).then(u.json)}getCurrentUserEmail(){if(!this.available)return Promise.reject(this.rejection);const t=`${this.url}/v1/users/current/email`;return fetch(t,this.defaults).then(u.json)}tryGetCurrentUserEmail(){return this.getCurrentUserEmail().then((t=>t||Promise.reject(new Error("User is not logged in"))))}getUserAvatarUrl(t){if(!this.available)return Promise.reject(this.rejection);if(!t)return Promise.reject(new Error("No email provided"));const e=encodeURIComponent(t),s=`${this.url}/v1/users/${e}/avatarurl`;return fetch(s,this.defaults).then(u.json)}getLoggedInState(){if(!this.available)return Promise.reject(this.rejection);const t=`${this.url}/v1/users/current/logged`;return fetch(t,this.defaults).then(u.json)}getBasicProfile(){if(!this.available)return Promise.reject(this.rejection);const t=`${this.url}/v1/users/current/basicprofile`;return fetch(t,this.defaults).then(u.json)}getShoppingCartItemsCount(t){if(!this.available)return Promise.reject(this.rejection);if(!t)return Promise.reject(new Error("Shopping cart session id is required"));const e=`${this.url}/v3/shoppingcarts/${t}/items/count`;return fetch(e,this.defaults).then(u.json)}getExpiringProductsCount(t){if(!this.available)return Promise.reject(this.rejection);if(!t)return Promise.reject(new Error("User email is required"));const e=encodeURIComponent(t),s=`${this.url}/v2/purchaseoptions/${e}/renewalsandupgrades/stats`;return fetch(s,this.defaults).then(u.json).then((t=>Number(t.expiring)))}getMySkuCategories(){if(!this.available)return Promise.reject(this.rejection);const t=`${this.url}/v2/stockkeepingunits/mine/categories`;return fetch(t,this.defaults).then(u.json)}getVirtualClassRoomSupport(){if(!this.available)return Promise.reject(this.rejection);const t=`${this.url}/v1/lms/hasaccess`;return fetch(t,this.defaults).then(u.json)}}const d="TK-Item--Selected",m=".TK-Dropdown:not(.TK-Dash)",p=".TK-Menu-Item-Button, .TK-Aside-Menu-Button",f=".TK-Menu-Item-Link.TK-Item--Selected, .TK-Aside-Menu-Link.TK-Item--Selected",v=(t,e)=>Array.from(e.querySelectorAll(t));function g(t){v(`.${d}`,t).forEach((t=>t.classList.remove(d)));const{href:e,pathname:s,search:n,hostname:i}=window.location;v("a",t).forEach((t=>{const o=t.hasAttribute("data-match-exact-path"),r=t.hasAttribute("data-match-contains-search"),a=t.hasAttribute("data-match-starts-with-path"),c=t.hasAttribute("data-match-pattern");if(o&&r?s===t.pathname&&n.indexOf(t.search)>=0&&t.classList.add(d):o?s===t.pathname&&t.classList.add(d):a&&e.startsWith(t.href)&&t.classList.add(d),c){new RegExp(t.getAttribute("data-pattern")).test(i+s)&&t.classList.add(d)}}));const o=v(`.${d}`,t),r=v(`${f}`,t);if(r.length>1){const t=r.find((t=>t.hasAttribute("data-match-exact-path")));t?r.filter((e=>e!==t)).forEach((t=>t.classList.remove(d))):r.slice(1).forEach((t=>t.classList.remove(d)))}if(0===r.length){let t=!1;o.forEach((e=>{if(!t){const s=e.closest(m);if(s){const e=s.parentElement.querySelector(p);e&&e.classList.add(d),t=!0}}}))}}class w{constructor(){this.api=new u,this.hiddenClassName="TK-dn",this.logoutLink=document.querySelector("#js-tlrk-nav-log-out"),this.avatarImage=document.querySelector("#js-tlrk-nav-avatar-image"),this.authenticatedContainer=document.querySelector("#js-tlrk-nav-auth-container"),this.notAuthenticatedContainer=document.querySelector("#js-tlrk-nav-not-auth-container"),this.supportMenu=document.querySelector("#js-tlrk-nav-ya-support-menu"),this.productsMenuContainer=document.querySelector("#js-tlrk-nav-ya-products-menu"),this.productsMenu=document.querySelector("#js-tlrk-nav-ya-products-menu .TK-Dropdown-List"),this.isYourAccount=!(!this.supportMenu||!this.productsMenu),this.isClientSideAuth=!(!this.authenticatedContainer||!this.notAuthenticatedContainer),this.setSignoutUrl=this.setSignoutUrl.bind(this)}populateProfileMenu(t){if(!t||!this.api.env||!this.isClientSideAuth)return Promise.resolve(!1);const{signoutUrl:e}=this.api.env;return this.api.getUserAvatarUrl(t).then((t=>{t&&(this.avatarImage&&this.avatarImage.setAttribute("src",t),this.logoutLink&&this.logoutLink.setAttribute("href",e),this.authenticatedContainer&&this.authenticatedContainer.classList.remove(this.hiddenClassName),this.notAuthenticatedContainer&&this.notAuthenticatedContainer.classList.add(this.hiddenClassName))}))}populateSupportMenu(t){return t&&this.isYourAccount?this.api.getVirtualClassRoomSupport().then((t=>{if(t){const t='<li><a href="/account/support/virtual-classroom" class="TK-Dropdown-Link" data-match-exact-path>On-Demand Product Training</li>';this.supportMenu.classList.add("TK-Dropdown--230"),this.supportMenu.insertAdjacentHTML("beforeend",t)}})):Promise.resolve(!1)}populateProductsMenu(t){return t&&this.isYourAccount?this.api.getMySkuCategories().then((t=>{let e="";e=t.length?t.map((t=>{let e;return"Main"===t.type&&(e=`/account/your-products?skucid=${t.id}`),"Extension"===t.type&&(e=`/account/your-products/extensions?skucid=${t.id}`),`<li><a href="${e}" class="TK-Dropdown-List-Link" data-match-exact-path data-match-contains-search>${t.name}</a></li>`})).join(""):'\n          <li>\n            <a href="/purchase.aspx" class="TK-Dropdown-List-Link TK-Nav-Ya-No-Products" data-match-exact-path>\n              <span>There are no purchased products</span>\n              <span><b class="TK-vam">Buy Products</b><svg class="TK-vam" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"><path d="M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"/><path d="M0 0h24v24H0z" fill="none"/></svg></span>\n              <span>Purchase Individual Products Or DevCraft Value Bundles</span>\n            </a>\n          </li>\n        '.trim(),t.length>18&&this.productsMenuContainer.classList.add("TK-Dropdown--Full-Split"),this.productsMenu.innerHTML=e})):Promise.resolve(!1)}setSignoutUrl(){if(!this.api.env||!this.logoutLink)return;const t=window.location.href,e=encodeURIComponent(encodeURIComponent(t)),{telerikWebsiteUrl:s,signoutBaseUrl:n}=this.api.env,i=`${s}${n}${e}`;this.logoutLink.setAttribute("href",i)}}function k(t=null,e=!1){const s=new CustomEvent("tk-account-ready",{detail:{email:t,isYourAccount:e}});document.dispatchEvent(s)}const b="#js-tlrk-nav-dash",C="#js-tlrk-nav-drawer";const L=new class{constructor(){this.label="[tlrk-nav]",this.enabled=window.location.search.includes("debug"),this.log=this.log.bind(this),this.warn=this.warn.bind(this),this.error=this.error.bind(this)}log(...t){this.enabled&&console.log(this.label,...t)}warn(...t){this.enabled&&console.warn(this.label,...t)}error(...t){this.enabled&&console.error(this.label,...t)}},E={count:0,hidden:!1,mainClass:"TK-Counter",emptyClass:"TK-Counter--Empty",hiddenClass:"TK-Counter--Hidden",visibleClass:"TK-Counter--Visible",modifierClass:"",container:null};class y{constructor(t=E){if(this.options=Object.assign({},E,t),this.element=document.createElement("span"),this.element.classList.add(this.options.mainClass),this.setCount(this.options.count),this.options.modifierClass&&this.element.classList.add(this.options.modifierClass),this.isHidden=this.options.hidden,this.element.classList.toggle(this.options.hiddenClass,this.isHidden),this.element.classList.toggle(this.options.visibleClass,!this.isHidden),this.container=this.options.container,null!=this.container){if(!(this.container instanceof HTMLElement))throw new Error("Countainer should be HTMLElement");this.render()}}setCount(t){if(null==t||"number"!=typeof t||Number.isNaN(t))throw new TypeError("Count should be of type Number");this.count!==t&&(this.count=t,this.element.innerHTML=t,this.element.classList.toggle(this.options.emptyClass,!t))}show(){this.isHidden&&(this.element.classList.add(this.options.visibleClass),this.element.classList.remove(this.options.hiddenClass),this.element.classList.toggle(this.options.emptyClass,!this.count),this.isHidden=!1)}hide(){this.isHidden||(this.element.classList.add(this.options.hiddenClass),this.element.classList.remove(this.options.visibleClass),this.element.classList.toggle(this.options.emptyClass,!this.count),this.isHidden=!0)}toggle(){this.isHidden?this.show():this.hide()}render(t=this.container){if(null==t)throw new Error("Container should be not null or undefined");t instanceof HTMLElement&&(t.appendChild(this.element),this.isRendered=!0,this.isHidden?this.hide():this.show())}static create(t=E){return new y(t)}}class j{static get(t){return new Promise(((e,s)=>{const n=j.getSync(t);n?e(n):s(new Error("None value"))}))}static set(t,e){try{return j.setSync(t,e),Promise.resolve(e)}catch(t){return Promise.reject(t)}}static getSync(t){return JSON.parse(window.localStorage.getItem(t))}static setSync(t,e){window.localStorage.setItem(t,JSON.stringify(e))}}class S{static read(t){const e=`(^|;)\\s*${t}\\s*=\\s*([^;]+)`,s=document.cookie.match(e);return s?s.pop():""}}class A{constructor(){this.api=new u,this.cacheKey="tlrk_prgs_sci_count",this.cacheTime=432e5,this.cookieName="OSC_Session"}getCurrentTime(){return(new Date).getTime()}getItemsCount(){const t=this.cacheKey,e=S.read(this.cookieName);if(!e)return Promise.resolve(0);const s=({value:t,time:s})=>this.getCurrentTime()>s+this.cacheTime?this.getItemsCountFromApi(e):t;return this.shouldGetValueFromCache()?j.get(t).then(s).catch((()=>this.getItemsCountFromApi(e))):this.getItemsCountFromApi(e)}getItemsCountFromApi(t){const e=this.cacheKey,s=this.getCurrentTime();return this.api.getShoppingCartItemsCount(t).then((t=>j.set(e,{value:t,time:s}))).then((()=>j.get(e))).then((({value:t})=>t))}shouldGetValueFromCache(){const t=document.referrer.toLowerCase(),e=window.location.origin.toLowerCase();return!!t&&0===t.indexOf(e)}}const T=()=>new Promise((t=>{"loading"!==document.readyState?t():document.addEventListener("readystatechange",(()=>{"interactive"===document.readyState&&t()}))}));function P(t){if(function(){const t=document.createElement("div");return["","-webkit-","-moz-","-ms-"].some((e=>{try{t.style.position=`${e}sticky`}catch(t){}return""!==t.style.position}))}())return;const e=t=>{const e=window.StickyElement.create(t);return document.addEventListener("tk-update-sticky",(()=>{e.reset(),e.update()})),e};T().then((()=>{window.StickyElement?e(t):new Promise(((t,e)=>{const s=document.createElement("script");s.src="https://d6vtbcy3ong79.cloudfront.net/sticky-element/2.0.14/index.js",s.async=!0,s.addEventListener("load",t),s.addEventListener("error",e),document.body.appendChild(s)})).then((()=>e(t))).catch((t=>console.error(`StickyElement script did not load. ${t.message}`)))}))}const H="#js-tlrk-nav-metric",K="#js-tlrk-nav-styles",M="#js-tlrk-nav-dash",I="#js-tlrk-nav-drawer",$="#js-tlrk-nav-drawer-button",U="#js-tlrk-nav-overlay",N=!(!("ontouchstart"in window)&&!navigator.maxTouchPoints),x=t=>t.preventDefault(),O=()=>Math.max(document.documentElement.clientWidth,window.innerWidth||0)<=1240,q=()=>!O(),D=document.querySelector("#js-tlrk-nav"),R=t=>D&&D.querySelector(t),F=t=>D&&Array.from(D.querySelectorAll(t));function B(){let t=!1;const{fonts:e}=document,s=document.querySelector(H),n=document.querySelector(K),i=t=>!t.classList.contains("is-loading"),o=()=>{t||(requestAnimationFrame((()=>{requestAnimationFrame((()=>{D.classList.remove("TK-Nav--Loading"),D.classList.add("TK-Nav--Loaded")}))})),t=!0)};if(i(s)&&i(n))return o();if(e){if("loaded"===e.status)return o();const t=["15px Metric-Light","15px Metric-Medium","15px Metric-Regular","15px Metric-Semibold"],s=t.map((t=>e.check(t))),n=t.map((t=>e.load(t)));if(s.every(Boolean))return o();const i=a(n);return Promise.race?Promise.race([i,e.ready]).then(o).catch(o):i.then(o)}const r=t=>new Promise(((e,s)=>{i(t)?e():(t.addEventListener("load",e),t.addEventListener("error",s),setTimeout((()=>i(t)?e():s()),512))}));return a([r(s),r(n)]).then(o)}window.TLRK_NAV_INITIALIZED||(function(){const t=new w;if(!t.api.available)return k(null,t.isYourAccount);if(!t.isClientSideAuth)return k(null,t.isYourAccount);const e=document.querySelector(b),s=document.querySelector(C),n=t.api.initAsync().then((()=>t.api.getCurrentUserEmail())),i=()=>{e&&s&&(g(e),g(s))},o=[n.then((e=>t.populateProfileMenu(e))),n.then((e=>t.populateSupportMenu(e))),n.then((e=>t.populateProductsMenu(e)))],r=()=>n.then((e=>k(e,t.isYourAccount)));Promise.all(o).then((()=>{i(),r()})).catch((()=>{i(),r()})),document.addEventListener("ng-location-changed",i),document.addEventListener("ng-location-changed",t.setSignoutUrl)}(),function(){if(!D)return;const t=F("a, button"),s=F(".TK-Dropdown"),n=R(M),i=R(I),a=R($),c=R(U),h=new e(c),l=new r(s,{click:!0,hover:!0,beforeOpenHook:()=>{i&&d.close(),l.close(),O()&&h.show()},beforeCloseHook:()=>{O()&&h.hide()}}),u=new r(l.dropdowns.filter((t=>i&&i.contains(t.element)))),d=new o(i,{click:!0,hover:!1,button:a,activeClass:"TK-Drawer--Active",beforeOpenHook:()=>{l.close(),h.show(),u.off("tk-hover"),u.off("tk-before-open-hook"),u.off("tk-before-close-hook")},beforeCloseHook:()=>{h.hide(),u.on("tk-hover"),u.on("tk-before-open-hook"),u.on("tk-before-close-hook")}});function m(t=128){N||setTimeout((()=>l.close()),t)}function p(){q()?l.on("tk-hover"):l.off("tk-hover")}N&&l.dropdowns.map((t=>t.button)).forEach((t=>t.addEventListener("click",x,!1))),t.filter((t=>t!==h.element)).filter((t=>t!==d.button)).filter((t=>!l.associate(t))).forEach((t=>t.addEventListener("focus",m,!1))),h.addEventListener("click",(()=>{d.close(),l.close()})),p(),window.addEventListener("resize",p,!1),window.addEventListener("orientationchange",(()=>{d.close(),l.close()}),!1),document.addEventListener("ng-location-changed",m,!1),n&&i&&(g(n),g(i))}(),function(){const t=new A,e=Array.from(document.querySelectorAll(".js-tlrk-nav-shopping-cart-counter-container"));t.api.isStore?Promise.resolve("No need to fetch items count in store, because there is no shopping cart icon"):e.length?t.getItemsCount().then((t=>{const s=Number(t);e.forEach((t=>new y({count:s,hidden:!1,container:t,modifierClass:"TK-Counter--SC"}))),0===s&&e.forEach((t=>t.setAttribute("href",t.dataset.emptyUrl)))})).catch(L.error):Promise.resolve("No elements match given selector")}(),requestAnimationFrame(B),P({top:0,fixClass:"TK-Bar--Sticky",selector:"#js-tlrk-nav .TK-Bar",breakpoint:1240}),function(){const t=R("#js-tlrk-skip-link"),e=document.createElement("div");e.classList.add("TK-Nav-Skipper"),e.tabIndex=0,t.addEventListener("click",(s=>{D.after(e),t.blur(),e.focus(),e.remove(),s.preventDefault()}))}(),window.TLRK_NAV_INITIALIZED=!0)}();
//# sourceMappingURL=index.min.mjs.map
