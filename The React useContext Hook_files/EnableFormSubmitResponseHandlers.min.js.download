!function(n){XMLHttpRequest.prototype.send=function(){var u=this.onreadystatechange;this.onreadystatechange=function(){var n=this.XMLHttpRequestUrl;this.readyState==4&&this.status==200&&n&&n.match(/(AjaxSubmit|PageAjaxSubmit|TemplateAjaxSubmit)(?=[/\r\n?]|$)/ig)&&t(this);this.readyState==4&&n&&n.match(/(AjaxSubmit|PageAjaxSubmit|TemplateAjaxSubmit)(?=[/\r\n?]|$)/ig)&&(this.status>=400&&this.status<600||this.status==200&&r(this.response)&&!JSON.parse(this.response).success)&&i(this);u&&u.apply(this,arguments)};n.apply(this,arguments)};var t=function(n){window.MvcFormSubmitResponseHandlers=window.MvcFormSubmitResponseHandlers||[];for(var t=0;t<window.MvcFormSubmitResponseHandlers.length;t++)window.MvcFormSubmitResponseHandlers[t](n)},i=function(n){window.MvcFormSubmitErrorResponseHandlers=window.MvcFormSubmitErrorResponseHandlers||[];for(var t=0;t<window.MvcFormSubmitErrorResponseHandlers.length;t++)window.MvcFormSubmitErrorResponseHandlers[t](n)};function r(n){try{JSON.parse(n)}catch(t){return!1}return!0}}(XMLHttpRequest.prototype.send);!function(n){XMLHttpRequest.prototype.open=function(t,i){if(i.match(/(AjaxSubmit|PageAjaxSubmit|TemplateAjaxSubmit)(?=[/\r\n?]|$)/ig)){var r=/(\?|\&)(widgetInstanceId)\=([^&]+)/gm.exec(i);if(r&&r.length>3){this.WidgetInstanceId=r[3];var u=r[0],f=i.split(u),e=f.length>1&&(f[1]||f.length>2),o=u[0]=="?"&&e?"?":"";i=i.replace(u,o)}this.XMLHttpRequestUrl=i}n.apply(this,arguments)}}(XMLHttpRequest.prototype.open)